var app=app||{};!function(){app.config={init:function(){this.settings={search:{itemType:"craft beer",rankBy:google.maps.places.RankBy.DISTANCE,orderByDistance:!0,radius:"25000",primaryTypes:["bar","liquor_store"],secondaryTypes:["restaurant"],excludedTypes:[],topResultsOnly:!1}},this.google={apiKey:"AIzaSyBCaX60okxecYLD05GC745IP1u6nzwKDSo"},this.google.geocodingAPI={reqURL:"https://maps.googleapis.com/maps/api/geocode/json?"}}}}(),function(){app.controllers=app.controllers||{},app.controllers.formSearch=function(){app.models.userLoc.init();var a=app.views.form.cityStateTbox.value;return a?void app.controllers.getGeocode(a).then(function(a){return app.models.searchLoc.lat=a.results[0].geometry.location.lat,app.models.searchLoc.lng=a.results[0].geometry.location.lng,app.models.searchLoc.setFormattedAddress(a.results[0].formatted_address),app.controllers.reqPlaces(app.models.searchLoc.lat,app.models.searchLoc.lng)}).then(function(a){app.models.places.add(a);var b=app.models.places.get(),c=[];return b.forEach(function(a){var b={lat:null,lng:null};b.lat=a.geometry.location.lat,b.lng=a.geometry.location.lng,c.push(b)}),app.controllers.reqMultiDistance(app.models.searchLoc.lat,app.models.searchLoc.lng,c)}).then(function(a){var b=app.models.places.get();a.rows[0].elements.forEach(function(a,c){a.distance&&(b[c].drivingInfo={value:a.distance.value,distance:a.distance.text,duration:a.duration.text})});var c=app.controllers.sortPlaces(b);app.models.searchLoc.totalItems=c.primary.length+c.secondary.length,app.models.places.add(c),app.controllers.addRecentSearch(),app.controllers.updatePage(),app.views.page.enableButtons()})["catch"](app.controllers.stopExecution):(app.views.alerts.show("error","Please enter a location."),void app.views.page.enableButtons())}}(),function(){app.controllers=app.controllers||{},app.controllers.geolocationSearch=function(){app.models.searchLoc.init(),app.controllers.getCurrentLocation().then(function(a){return app.models.userLoc.lat=a.coords.latitude,app.models.userLoc.lng=a.coords.longitude,app.controllers.reverseGeocode(app.models.userLoc.lat,app.models.userLoc.lng)}).then(function(a){var b=a.results[0].address_components[2].long_name+", "+a.results[0].address_components[4].short_name;return app.models.userLoc.setFormattedAddress(b),app.controllers.reqPlaces(app.models.userLoc.lat,app.models.userLoc.lng)}).then(function(a){app.models.places.add(a);var b=app.models.places.get(),c=[];return b.forEach(function(a){var b={lat:null,lng:null};b.lat=a.geometry.location.lat,b.lng=a.geometry.location.lng,c.push(b)}),app.controllers.reqMultiDistance(app.models.userLoc.lat,app.models.userLoc.lng,c)}).then(function(a){var b=app.models.places.get();a.rows[0].elements.forEach(function(a,c){a.distance&&(b[c].drivingInfo={value:a.distance.value,distance:a.distance.text,duration:a.duration.text})});var c=app.controllers.sortPlaces(b),d=c.primary.length+c.secondary.length;app.models.searchLoc.setTotalItems(app.models.places.paginationObj.hasNextPage?d+"+":d),app.models.places.add(c),app.controllers.addRecentSearch(),app.controllers.updatePage(),app.views.page.enableButtons()})["catch"](app.controllers.stopExecution)}}(),function(){app.controllers=app.controllers||{},app.controllers.addRecentSearch=function(){app.models.recentSearches.add()},app.controllers.setSelectedPlaceDetails=function(a){return new Promise(function(b){app.models.selectedPlace.init(),app.models.selectedPlace.placeId=a.place_id,app.models.selectedPlace.lat=a.geometry.location.lat,app.models.selectedPlace.lng=a.geometry.location.lng,app.models.selectedPlace.name=a.name,app.models.selectedPlace.setDrivingInfo(a.drivingInfo.distance,a.drivingInfo.duration),b()})},app.controllers.setSearchLocation=function(a){app.models.searchLoc.lat=a.lat,app.models.searchLoc.lng=a.lng,app.models.searchLoc.setFormattedAddress(a.formattedAddress),app.models.searchLoc.setTotalItems(a.totalItems)}}(),function(){app.controllers=app.controllers||{},app.controllers.recentSearch=function(a){app.models.userLoc.init(),app.controllers.setSearchLocation(a),app.controllers.reqPlaces(app.models.searchLoc.lat,app.models.searchLoc.lng).then(function(a){app.models.places.add(a);var b=app.models.places.get(),c=[];return b.forEach(function(a){var b={lat:null,lng:null};b.lat=a.geometry.location.lat,b.lng=a.geometry.location.lng,c.push(b)}),app.controllers.reqMultiDistance(app.models.searchLoc.lat,app.models.searchLoc.lng,c)}).then(function(a){var b=app.models.places.get();a.rows[0].elements.forEach(function(a,c){a.distance&&(b[c].drivingInfo={value:a.distance.value,distance:a.distance.text,duration:a.duration.text})});var c=app.controllers.sortPlaces(b),d=c.primary.length+c.secondary.length;app.models.searchLoc.setTotalItems(app.models.places.paginationObj.hasNextPage?d+"+":d),app.models.places.add(c),app.controllers.updatePage(),app.views.page.enableButtons()})["catch"](app.controllers.stopExecution)}}(),function(){app.controllers=app.controllers||{},app.controllers.stopExecution=function(a){app.views.alerts.show(a.type,a.text),app.views.results.clear(),app.views.placeModal.hide(),app.views.page.enableButtons()},app.controllers.getDetails=function(a){var b=app.models.places.find(a);app.controllers.setSelectedPlaceDetails(b).then(app.controllers.reqPlaceDetails).then(app.controllers.reqTransitDistance).then(app.controllers.updateModal)["catch"](app.controllers.stopExecution)},app.controllers.switchToGeolocation=function(){app.controllers.getCurrentLocation().then(function(a){app.models.userLoc.lat=a.coords.latitude,app.models.userLoc.lng=a.coords.longitude}).then(app.controllers.reqDrivingDistance).then(app.controllers.reqTransitDistance).then(app.controllers.updateModal).then(function(){var a=app.models.places.get();(a.primary||a.secondary)&&(a=a.primary.concat(a.secondary));var b=[];return a.forEach(function(a){var c={lat:null,lng:null};c.lat=a.geometry.location.lat,c.lng=a.geometry.location.lng,b.push(c)}),app.controllers.reqMultiDistance(app.models.userLoc.lat,app.models.userLoc.lng,b)}).then(function(a){var b=app.models.places.get();(b.primary||b.secondary)&&(b=b.primary.concat(b.secondary)),a.rows[0].elements.forEach(function(a,c){a.distance&&(b[c].drivingInfo={value:a.distance.value,distance:a.distance.text,duration:a.duration.text})});var c=app.controllers.sortPlaces(b),d=c.primary.length+c.secondary.length;app.models.searchLoc.setTotalItems(app.models.places.paginationObj.hasNextPage?d+"+":d),app.models.places.add(c),app.controllers.updatePage()})["catch"](app.controllers.stopExecution)},app.controllers.requestMoreResults=function(){var a=app.models.places.paginationObj;a.nextPage(),window.setTimeout(function(){for(var a=app.models.userLoc.lat||app.models.userLoc.lat,b=app.models.userLoc.lng||app.models.userLoc.lng,c=app.models.places.get(),d=[],e=0;e<c.length;e++){var f={lat:null,lng:null};f.lat=c[e].geometry.location.lat,f.lng=c[e].geometry.location.lng,d.push(f)}app.controllers.reqMultiDistance(a,b,d).then(function(a){for(var b=app.models.places.get(),c=0;c<a.rows[0].elements.length;c++)a.rows[0].elements[c].distance&&(b[c].drivingInfo={value:a.rows[0].elements[c].distance.value,distance:a.rows[0].elements[c].distance.text,duration:a.rows[0].elements[c].duration.text});var d=app.controllers.sortPlaces(b),e=d.primary.length+d.secondary.length;app.models.searchLoc.setTotalItems(app.models.places.paginationObj.hasNextPage?e+"+":e),app.models.places.add(d),app.controllers.updatePage(),app.views.page.enableButtons()})["catch"](app.controllers.stopExecution)},2e3)}}(),function(){app.controllers=app.controllers||{},app.controllers.updatePage=function(){app.models.places.get();app.views.alerts.show("success",app.models.searchLoc.totalItems+" matches! Click on an item for more details."),app.views.form.setTboxPlaceholder(),app.views.recentSearches.render(),app.views.results.render()},app.controllers.updateModal=function(){return new Promise(function(a){app.views.placeModal.populate(),app.views.placeModal.show(),a()})}}(),$(function(){app.config.init(),app.models.searchLoc.init(),app.models.places.init(),app.views.page.init(),app.views.map.init(),app.views.form.init(),app.views.locationBtn.init(),app.views.alerts.init(),app.views.results.init(),app.views.recentSearches.init(),app.views.placeModal.init()}),function(){app.models=app.models||{},app.models.places={init:function(){sessionStorage.clear()},add:function(a){sessionStorage.setItem("places",JSON.stringify(a))},get:function(){return JSON.parse(sessionStorage.getItem("places"))},find:function(a){for(var b=this.get(),c=0;c<b.primary.length;c++)if(b.primary[c].place_id===a.place_id)return b.primary[c];for(var d=0;d<b.secondary.length;d++)if(b.secondary[d].place_id===a.place_id)return b.secondary[d]}}}(),function(){app.models=app.models||{},app.models.recentSearches={add:function(){var a=this.get();a?a.length>=5&&a.pop():a=[];var b={};b.lat=app.models.userLoc.lat||app.models.searchLoc.lat,b.lng=app.models.userLoc.lng||app.models.searchLoc.lng,b.formattedAddress=app.models.userLoc.formattedAddress||app.models.searchLoc.formattedAddress,b.totalItems=app.models.userLoc.totalItems||app.models.searchLoc.totalItems,a.unshift(b),localStorage.setItem("recentSearches",JSON.stringify(a))},get:function(){return JSON.parse(localStorage.getItem("recentSearches"))}}}(),function(){app.models=app.models||{},app.models.searchLoc={init:function(){this.lat=null,this.lng=null,this.formattedAddress=null,this.totalItems=null},setFormattedAddress:function(a){this.formattedAddress=a.replace(/((\s\d+)?,\sUSA)/i,"")}}}(),function(){app.models=app.models||{},app.models.selectedPlace={init:function(){this.placeId=null,this.lat=null,this.lng=null,this.name=null,this.openNow=null,this.website=null,this.address=null,this.googleMapsUrl=null,this.phoneNum=null,this.drivingInfo={},this.transitInfo={},this.hoursOpen=null},setOpenNow:function(a){this.openNow=a?"Yes":"No"},setWebsite:function(a){this.website=a?a:""},setAddress:function(a){this.address=a.replace(/, United States/i,"")},setGoogleMapsUrl:function(a){this.googleMapsUrl=a?a:""},setPhoneNum:function(a){this.phoneNum=a?a:""},setDrivingInfo:function(a,b){this.drivingInfo.distance=a?a:"",this.drivingInfo.duration=b?b:""},setTransitInfo:function(a,b){this.transitInfo.distance=a?a:"",this.transitInfo.duration=b?b:""},setHoursOpen:function(a){this.hoursOpen=a?a:""}}}(),function(){app.models=app.models||{},app.models.userLoc={init:function(){this.lat=null,this.lng=null,this.formattedAddress=null,this.totalItems=null},setFormattedAddress:function(a){this.formattedAddress=a.replace(/((\s\d+)?,\sUSA)/i,"")},setTotalItems:function(a){this.totalItems=a}}}(),function(){app.controllers=app.controllers||{},app.controllers.reqMultiDistance=function(a,b,c){return new Promise(function(d,e){function f(c,d){var f=new google.maps.DistanceMatrixService,h={origins:[new google.maps.LatLng(a,b)],destinations:c,travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL};f.getDistanceMatrix(h,function(a,b){return console.log("reqMultiDistance status: "+b),b!=google.maps.DistanceMatrixStatus.OK?void e({type:"error",text:"An error occurred. Please try again."}):(k[d]=a,void g(k))})}function g(a){var b={originAddresses:[],destinationAddresses:[],rows:[{elements:[]}]};if(a[j]){for(b.originAddresses=a[1].originAddresses,i=1;i<=j;i++)b.destinationAddresses=b.destinationAddresses.concat(a[i].destinationAddresses),b.rows[0].elements=b.rows[0].elements.concat(a[i].rows[0].elements);d(b)}}var h=25,j=Math.ceil(c.length/h),k={};for(i=1;i<=j;i++){var l=[],m=[];l=c.splice(0,h),l.forEach(function(a){m.push(new google.maps.LatLng(a.lat,a.lng))}),f(m,i)}})},app.controllers.reqDrivingDistance=function(){return new Promise(function(a,b){function c(c,d){if(d!=google.maps.DistanceMatrixStatus.OK)return void b({type:"error",text:"An error occurred. Please try again."});var e,f;c.rows[0].elements[0].distance&&c.rows[0].elements[0].duration&&(e=c.rows[0].elements[0].distance.text,f=c.rows[0].elements[0].duration.text),app.models.selectedPlace.setDrivingInfo(e,f),a()}var d=app.models.userLoc.lat||app.models.searchLoc.lat,e=app.models.userLoc.lng||app.models.searchLoc.lng,f={origins:[new google.maps.LatLng(d,e)],destinations:[new google.maps.LatLng(app.models.selectedPlace.lat,app.models.selectedPlace.lng)],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL},g=new google.maps.DistanceMatrixService;g.getDistanceMatrix(f,c)})},app.controllers.reqTransitDistance=function(){return new Promise(function(a,b){function c(c,d){if(d!=google.maps.DistanceMatrixStatus.OK)return void b({type:"error",text:"An error occurred. Please try again."});var e,f;c.rows[0].elements[0].distance&&c.rows[0].elements[0].duration&&(e=c.rows[0].elements[0].distance.text,f=c.rows[0].elements[0].duration.text),app.models.selectedPlace.setTransitInfo(e,f),a()}var d=app.models.userLoc.lat||app.models.searchLoc.lat,e=app.models.userLoc.lng||app.models.searchLoc.lng,f={origins:[new google.maps.LatLng(d,e)],destinations:[new google.maps.LatLng(app.models.selectedPlace.lat,app.models.selectedPlace.lng)],travelMode:google.maps.TravelMode.TRANSIT,transitOptions:{modes:[google.maps.TransitMode.SUBWAY]},unitSystem:google.maps.UnitSystem.IMPERIAL},g=new google.maps.DistanceMatrixService;g.getDistanceMatrix(f,c)})}}(),function(){app.controllers=app.controllers||{},app.controllers.getGeocode=function(a){return new Promise(function(b,c){var d=new XMLHttpRequest,e="key="+app.config.google.apiKey+"&address="+encodeURIComponent(a);d.open("GET",app.config.google.geocodingAPI.reqURL+e,!0),d.onload=function(){if(d.readyState===XMLHttpRequest.DONE){if(200!==d.status)return void c({type:"error",text:"An error occurred. Please try again."});var a=JSON.parse(d.responseText);if("ZERO_RESULTS"===a.status||void 0===a.results[0].geometry.bounds)return void c({type:"error",text:"Sorry, that location could not be found."});b(a)}},d.send()})},app.controllers.reverseGeocode=function(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest,f="key="+app.config.google.apiKey+"&latlng="+a+","+b;e.open("GET",app.config.google.geocodingAPI.reqURL+f,!0),e.send(),e.onload=function(){if(e.readyState===XMLHttpRequest.DONE){if(200!==e.status)return void d({type:"error",text:"An error occurred. Please try again."});var a=JSON.parse(e.responseText);c(a)}}})}}(),function(){app.controllers=app.controllers||{},app.controllers.getCurrentLocation=function(){return new Promise(function(a,b){if(!navigator.geolocation)return void b({type:"error",text:"Sorry, geolocation is not supported in your browser."});var c=function(b){a(b)},d=function(){b({type:"error",text:"An error occurred. Please try again."})},e={enableHighAccuracy:!0};navigator.geolocation.getCurrentPosition(c,d,e)})}}(),function(){app.controllers=app.controllers||{},app.controllers.reqPlaces=function(a,b){return new Promise(function(c,d){function e(a,b,e){return console.log("reqPlaces status: "+b),b==google.maps.places.PlacesServiceStatus.ZERO_RESULTS?void d({type:"info",text:"Your request returned no results."}):b!=google.maps.places.PlacesServiceStatus.OK?void d({type:"error",text:"An error occurred. Please try again."}):(g=g.concat(a),void(e.hasNextPage?e.nextPage():c(g)))}var f={location:new google.maps.LatLng(a,b),rankBy:app.config.settings.search.rankBy,keyword:app.config.settings.search.itemType},g=[];f.rankBy===google.maps.places.RankBy.PROMINENCE&&(f.radius=app.config.settings.search.radius);var h=new google.maps.places.PlacesService(app.views.map.map);h.nearbySearch(f,e)})},app.controllers.reqPlaceDetails=function(){return new Promise(function(a,b){function c(c,d){return d!=google.maps.places.PlacesServiceStatus.OK?void b({type:"error",text:"An error occurred. Please try again."}):(app.models.selectedPlace.setWebsite(c.website),app.models.selectedPlace.setAddress(c.formatted_address),app.models.selectedPlace.setGoogleMapsUrl(c.url),app.models.selectedPlace.setPhoneNum(c.formatted_phone_number),c.opening_hours&&(app.models.selectedPlace.setOpenNow(c.opening_hours.open_now),app.models.selectedPlace.setHoursOpen(c.opening_hours.weekday_text)),void a())}var d={placeId:app.models.selectedPlace.placeId};service=new google.maps.places.PlacesService(app.views.map.map),service.getDetails(d,c)})}}(),function(){app.controllers=app.controllers||{},app.controllers.insertionSort=function(a){for(var b=a.length,c=0;b>c;c++){for(var d=a[c],e=c-1;e>=0&&parseFloat(a[e].drivingInfo.value)>parseFloat(d.drivingInfo.value);e--)a[e+1]=a[e];a[e+1]=d}},app.controllers.sortPlaces=function(a){for(var b=app.config.settings.search.primaryTypes,c=app.config.settings.search.secondaryTypes,d=app.config.settings.search.excludedTypes,e=[],f=[],g={primary:null,secondary:null},h=0;h<a.length;h++){var i=!1,j=!1,k=!1;b.forEach(function(b){a[h].types.includes(b)&&(i=!0)}),i&&e.push(a[h]),e.includes(a[h])||(c.forEach(function(b){a[h].types.includes(b)&&(j=!0,d.forEach(function(b){a[h].types.includes(b)&&(k=!0)}))}),j&&!k&&f.push(a[h]))}return app.config.settings.search.orderByDistance&&(app.controllers.insertionSort(e),app.controllers.insertionSort(f)),0===e.length&&0===f.length?void reject({type:"info",text:"Your request returned no results."}):(g.primary=e,g.secondary=f,g)}}(),function(){app.views=app.views||{},app.views.alerts={init:function(){this.alert=document.getElementById("alert"),this.alert.classList.add("hidden")},clear:function(){this.alert=document.getElementById("alert"),this.alert.classList.add("hidden");for(var a=["alert-danger","alert-info","alert-success"],b=0;b<a.length;b++)this.alert.classList.remove(a[b]);this.alert.textContent=null},show:function(a,b){var c;"error"===a?c="alert-danger":"info"===a?c="alert-info":"success"===a&&(c="alert-success"),this.alert.textContent=b,this.alert.classList.add(c),this.alert.classList.remove("hidden")}}}(),function(){app.views=app.views||{},app.views.form={init:function(){this.cityStateTbox=document.getElementById("cityStateTbox"),this.searchBtn=document.getElementById("searchBtn"),this.cityStateTbox.setAttribute("autofocus",!0),this.cityStateTbox.setAttribute("placeholder","New York, NY"),this.cityStateTbox.addEventListener("click",function(){this.value=null}),this.cityStateTbox.addEventListener("keyup",function(a){13===a.keyCode&&(app.views.page.disableButtons(),app.views.page.clear(),app.controllers.formSearch())}),this.searchBtn.addEventListener("click",function(){app.views.page.disableButtons(),app.views.page.clear(),app.controllers.formSearch()})},setTboxPlaceholder:function(){this.cityStateTbox.value=null,this.cityStateTbox.setAttribute("placeholder",app.models.userLoc.formattedAddress||app.models.searchLoc.formattedAddress)},disableSearchBtn:function(){this.searchBtn.setAttribute("disabled",!0)},enableSearchBtn:function(){this.searchBtn.removeAttribute("disabled")}},app.views.locationBtn={init:function(){this.locationBtn=document.getElementById("locationBtn"),this.locationBtn.addEventListener("click",function(){app.views.page.disableButtons(),app.views.page.clear(),app.controllers.geolocationSearch()})},disable:function(){this.locationBtn.setAttribute("disabled",!0)},enable:function(){this.locationBtn.removeAttribute("disabled")}}}(),function(){app.views=app.views||{},app.views.map={init:function(){this.map=document.getElementById("map")}},app.views.page={init:function(){var a="",b=app.config.settings.search.itemType.split(/\s+/);b.forEach(function(b,c){a+=" "+b.charAt(0).toUpperCase()+b.slice(1)});var c=a+" Finder";document.title=c,document.getElementById("heading").textContent=c},clear:function(){app.views.alerts.clear(),app.views.results.clear()},disableButtons:function(){app.views.form.disableSearchBtn(),app.views.locationBtn.disable()},enableButtons:function(){window.setTimeout(function(){app.views.form.enableSearchBtn(),app.views.locationBtn.enable()},250)}}}(),function(){app.views=app.views||{},app.views.placeModal={init:function(){this.placeModal=document.getElementById("placeModal"),this.placeModalTitle=document.getElementById("placeModalTitle"),this.placeModalOpenNow=document.getElementById("placeModalOpenNow"),this.placeModalWebsite=document.getElementById("placeModalWebsite"),this.placeModalAddress=document.getElementById("placeModalAddress"),this.placeModalPhoneNum=document.getElementById("placeModalPhoneNum"),this.placeModalDrivingInfo=document.getElementById("placeModalDrivingInfo"),this.placeModalDistanceWarning=document.getElementById("placeModalDistanceWarning"),this.placeModalTransitInfo=document.getElementById("placeModalTransitInfo"),this.placeModalHoursOpen=document.getElementById("placeModalHoursOpen"),this.placeModalDistanceWarning.classList.add("hidden")},populate:function(){for(var a=document.getElementById("placeModalBody").children,b=0;b<a.length;b++)a[b].classList.remove("hidden");var c=(new Date).getDay();if(c-=1,c=-1===c?6:c,this.placeModalTitle.textContent=app.models.selectedPlace.name,app.models.selectedPlace.openNow?this.placeModalOpenNow.textContent=app.models.selectedPlace.openNow:this.placeModalOpenNow.parentElement.classList.add("hidden"),app.models.selectedPlace.website?(this.placeModalWebsite.setAttribute("href",app.models.selectedPlace.website),this.placeModalWebsite.textContent=app.models.selectedPlace.website):this.placeModalWebsite.parentElement.classList.add("hidden"),app.models.selectedPlace.address?(this.placeModalAddress.setAttribute("href",app.models.selectedPlace.googleMapsUrl),this.placeModalAddress.textContent=app.models.selectedPlace.address):this.placeModalAddress.parentElement.classList.add("hidden"),app.models.selectedPlace.phoneNum?(this.placeModalPhoneNum.setAttribute("href","tel:"+app.models.selectedPlace.phoneNum),this.placeModalPhoneNum.textContent=app.models.selectedPlace.phoneNum):this.placeModalPhoneNum.parentElement.classList.add("hidden"),app.models.userLoc.lat&&app.models.userLoc.lng&&this.placeModalDistanceWarning.classList.add("hidden"),this.placeModalDistanceWarning.addEventListener("mouseover",function(){this.classList.add("hovered")}),this.placeModalDistanceWarning.addEventListener("mouseout",function(){this.classList.remove("hovered"),this.classList.remove("clicked")}),this.placeModalDistanceWarning.addEventListener("click",function(){this.classList.add("clicked"),window.setTimeout(function(){app.controllers.switchToGeolocation()},1500)}),app.models.selectedPlace.drivingInfo.duration||app.models.selectedPlace.drivingInfo.distance?this.placeModalDrivingInfo.textContent=app.models.selectedPlace.drivingInfo.duration+" ("+app.models.selectedPlace.drivingInfo.distance+")":this.placeModalDrivingInfo.textContent="No driving options",app.models.selectedPlace.transitInfo.duration||app.models.selectedPlace.transitInfo.distance?this.placeModalTransitInfo.textContent=app.models.selectedPlace.transitInfo.duration+" ("+app.models.selectedPlace.transitInfo.distance+")":this.placeModalTransitInfo.textContent="No transit options",this.placeModalHoursOpen.textContent=null,app.models.selectedPlace.hoursOpen)for(var d=0;d<app.models.selectedPlace.hoursOpen.length;d++){var e=document.createElement("li"),f=app.models.selectedPlace.hoursOpen[d].split(/:\s/);e.innerHTML="<span><strong>"+f[0]+":</strong>"+f[1]+"</span>",d===c&&e.classList.add("current-day"),this.placeModalHoursOpen.appendChild(e)}else this.placeModalHoursOpen.parentElement.classList.add("hidden")},show:function(){$("#placeModal").modal("show")},hide:function(){$("#placeModal").modal("hide")}}}(),function(){app.views=app.views||{},app.views.recentSearches={init:function(){this.recentSearchesList=document.getElementById("recentSearchesList"),this.render()},render:function(){this.recentSearchesList.textContent=null;var a=app.models.recentSearches.get();if(!a){var b=document.createElement("li");return b.classList.add("list-group-item"),b.classList.add("text-center"),b.textContent="You have no recent searches.",void this.recentSearchesList.appendChild(b)}for(var c=0;c<a.length;c++){var b=document.createElement("li");b.classList.add("list-group-item"),b.textContent=a[c].formattedAddress;var d=document.createElement("span");d.classList.add("badge"),d.textContent=a[c].totalItems,b.appendChild(d),b.addEventListener("click",function(a){return function(){app.views.page.disableButtons(),app.views.page.clear(),app.controllers.recentSearch(a)}}(a[c])),function(a){a.addEventListener("click",function(){a.classList.add("clicked")})}(b),function(a){a.addEventListener("mouseover",function(){a.classList.add("hovered")})}(b),function(a){a.addEventListener("mouseout",function(){a.classList.remove("hovered"),a.classList.remove("clicked")})}(b),this.recentSearchesList.appendChild(b)}}}}(),function(){app.views=app.views||{},app.views.results={init:function(){this.primaryResults=document.getElementById("primaryResults"),this.primaryResultsList=document.getElementById("primaryResultsList"),this.secondaryResults=document.getElementById("secondaryResults"),this.secondaryResultsList=document.getElementById("secondaryResultsList"),this.primaryResults.classList.add("hidden"),this.secondaryResults.classList.add("hidden")},clear:function(){this.secondaryResults.classList.add("hidden"),this.secondaryResults.classList.add("hidden"),this.primaryResultsList.textContent=null,this.secondaryResultsList.textContent=null},render:function(){this.primaryResults.classList.add("hidden"),this.secondaryResults.classList.add("hidden"),this.primaryResultsList.textContent=null,this.secondaryResultsList.textContent=null;var a=app.models.places.get();if(!a)return void app.views.alerts.show("info","Your request returned no results.");for(var b=0;b<a.primary.length;b++){var c=document.createElement("li");c.classList.add("list-group-item"),c.textContent=a.primary[b].name;var d=document.createElement("span");d.classList.add("badge"),d.textContent=a.primary[b].drivingInfo.distance,c.appendChild(d),c.addEventListener("click",function(a){return function(){app.controllers.getDetails(a)}}(a.primary[b])),function(a){a.addEventListener("click",function(){a.classList.add("clicked")})}(c),function(a){a.addEventListener("mouseover",function(){a.classList.add("hovered")})}(c),function(a){a.addEventListener("mouseout",function(){a.classList.remove("hovered"),a.classList.remove("clicked")})}(c),this.primaryResultsList.appendChild(c)}for(var e=0;e<a.secondary.length;e++){var c=document.createElement("li");c.classList.add("list-group-item"),c.textContent=a.secondary[e].name;var d=document.createElement("span");d.classList.add("badge"),d.textContent=a.secondary[e].drivingInfo.distance,c.appendChild(d),c.addEventListener("click",function(a){return function(){app.controllers.getDetails(a)}}(a.secondary[e])),function(a){a.addEventListener("click",function(){a.classList.add("clicked")})}(c),function(a){a.addEventListener("mouseover",function(){a.classList.add("hovered")})}(c),function(a){a.addEventListener("mouseout",function(){a.classList.remove("hovered"),a.classList.remove("clicked")})}(c),this.secondaryResultsList.appendChild(c)}a.primary.length>0&&this.primaryResults.classList.remove("hidden"),a.secondary.length>0&&this.secondaryResults.classList.remove("hidden"),$("#resultsTab").tab("show")}}}();