var app=app||{};!function(){app.config={init:function(){this.settings={search:{itemType:"craft beer",rankBy:google.maps.places.RankBy.DISTANCE,unitSystem:google.maps.UnitSystem.IMPERIAL,orderByDistance:!0,radius:"25000",primaryTypes:["bar","liquor_store"],secondaryTypes:["restaurant"],excludedTypes:[]}},this.google={apiKey:"AIzaSyCYnbpy3ug_hU25ps2J5Bn-KNXl381XyBg"},this.google.geocodingAPI={reqURL:"https://maps.googleapis.com/maps/api/geocode/json?"}}}}(),function(){app.controllers=app.controllers||{},app.controllers.formSearch=function(){var a=app.views.form.cityStateTbox.value;return a?(app.views.progressModal.start("Getting Location"),app.models.searchLoc.isGeoSearch=!1,void app.modules.getGeocode(a).then(function(a){app.views.progressModal.update(25,"Requesting Places"),app.models.searchLoc.lat=a.results[0].geometry.location.lat,app.models.searchLoc.lng=a.results[0].geometry.location.lng;var b=a.results[0].formatted_address.replace(/((\s\d+)?,\sUSA)/i,"");return b=b.split(/,\s/),app.models.searchLoc.city=b.shift(),app.models.searchLoc.state=b.pop(),app.modules.reqPlaces(app.models.searchLoc.lat,app.models.searchLoc.lng)}).then(function(a){app.views.progressModal.update(50,"Requesting Distances"),app.models.places.add(a);var b=app.models.places.get(),c=[];return b.forEach(function(a){c.push({lat:a.geometry.location.lat,lng:a.geometry.location.lng})}),app.modules.reqMultiDistance(app.models.searchLoc.lat,app.models.searchLoc.lng,c)}).then(function(a){app.views.progressModal.update(75,"Sorting Places");var b=app.models.places.get();a.rows[0].elements.forEach(function(a,c){a.distance&&(b[c].drivingInfo={value:a.distance.value,distance:a.distance.text,duration:a.duration.text})});var c=app.modules.sortPlaces(b);app.models.places.add(c),app.models.searchLoc.totalItems=c.primary.length+c.secondary.length,app.models.recentSearches.add(app.models.searchLoc),app.views.progressModal.update(99,"Preparing Results"),window.setTimeout(function(){var a=app.models.searchLoc.cityState(),b=app.models.recentSearches.get();app.views.form.setTboxPlaceholder(a),app.views.alerts.show("success",app.models.searchLoc.totalItems+" matches! Click on an item for more details."),app.views.results.render(c),app.views.recentSearches.render(b),app.views.page.enableButtons()},999)})["catch"](app.controllers.stopExecution)):(app.views.alerts.show("error","Please enter a location."),void app.views.page.enableButtons())}}(),function(){app.controllers=app.controllers||{},app.controllers.geolocationSearch=function(){app.views.progressModal.start("Getting Location"),app.models.searchLoc.isGeoSearch=!0,app.modules.getCurrentLocation().then(function(a){return app.views.progressModal.update(20,"Getting Location"),app.models.searchLoc.lat=a.coords.latitude,app.models.searchLoc.lng=a.coords.longitude,app.modules.reverseGeocode(app.models.searchLoc.lat,app.models.searchLoc.lng)}).then(function(a){return app.views.progressModal.update(40,"Requesting Places"),app.models.searchLoc.city=a.results[0].address_components[2].long_name,app.models.searchLoc.state=a.results[0].address_components[4].short_name,app.modules.reqPlaces(app.models.searchLoc.lat,app.models.searchLoc.lng)}).then(function(a){app.views.progressModal.update(60,"Requesting Distances"),app.models.places.add(a);var b=app.models.places.get(),c=[];return b.forEach(function(a){c.push({lat:a.geometry.location.lat,lng:a.geometry.location.lng})}),app.modules.reqMultiDistance(app.models.searchLoc.lat,app.models.searchLoc.lng,c)}).then(function(a){app.views.progressModal.update(80,"Sorting Places");var b=app.models.places.get();a.rows[0].elements.forEach(function(a,c){a.distance&&(b[c].drivingInfo={value:a.distance.value,distance:a.distance.text,duration:a.duration.text})});var c=app.modules.sortPlaces(b);app.models.places.add(c),app.models.searchLoc.totalItems=c.primary.length+c.secondary.length,app.models.recentSearches.add(app.models.searchLoc),app.views.progressModal.update(99,"Preparing Results"),window.setTimeout(function(){var a=app.models.searchLoc.cityState(),b=app.models.recentSearches.get();app.views.form.setTboxPlaceholder(a),app.views.alerts.show("success",app.models.searchLoc.totalItems+" matches! Click on an item for more details."),app.views.results.render(c),app.views.recentSearches.render(b),app.views.page.enableButtons()},999)})["catch"](app.controllers.stopExecution)}}(),function(){app.controllers=app.controllers||{},app.controllers.recentSearch=function(a){app.views.progressModal.start("Requesting Places"),app.models.searchLoc.isGeoSearch=!1,app.models.searchLoc.setBasicDetails(a),app.modules.reqPlaces(app.models.searchLoc.lat,app.models.searchLoc.lng).then(function(a){app.views.progressModal.update(33,"Requesting Distances"),app.models.places.add(a);var b=app.models.places.get(),c=[];return b.forEach(function(a){c.push({lat:a.geometry.location.lat,lng:a.geometry.location.lng})}),app.modules.reqMultiDistance(app.models.searchLoc.lat,app.models.searchLoc.lng,c)}).then(function(a){app.views.progressModal.update(66,"Sorting Places");var b=app.models.places.get();a.rows[0].elements.forEach(function(a,c){a.distance&&(b[c].drivingInfo={value:a.distance.value,distance:a.distance.text,duration:a.duration.text})});var c=app.modules.sortPlaces(b);app.models.places.add(c),app.models.searchLoc.totalItems=c.primary.length+c.secondary.length,app.views.progressModal.update(99,"Preparing Results"),window.setTimeout(function(){var a=app.models.searchLoc.cityState();app.views.form.setTboxPlaceholder(a),app.views.alerts.show("success",app.models.searchLoc.totalItems+" matches! Click on an item for more details."),app.views.results.render(c),app.views.page.enableButtons()},999)})["catch"](app.controllers.stopExecution)}}(),function(){app.controllers=app.controllers||{},app.controllers.stopExecution=function(a){$("#progressModal").modal("hide"),$("#progressModal").on("hidden.bs.modal",function(){app.views.progressModal.init()}),app.views.alerts.show(a.type,a.text),app.views.results.clear(),app.views.placeModal.hide(),app.views.page.enableButtons()},app.controllers.getDetails=function(a){app.models.selectedPlace.init();var b=app.models.places.find(a);app.models.selectedPlace.setBasicDetails(b),app.models.selectedPlace.setDrivingInfo(b.drivingInfo.distance,b.drivingInfo.duration),app.modules.reqPlaceDetails(b.place_id).then(function(a){app.models.selectedPlace.setSpecificDetails(a);var b={lat:app.models.searchLoc.lat,lng:app.models.searchLoc.lng},c={lat:app.models.selectedPlace.lat,lng:app.models.selectedPlace.lng};return app.modules.reqTransitDistance(b,c)}).then(function(a){var b,c;a.rows[0].elements[0].distance&&a.rows[0].elements[0].duration&&(b=a.rows[0].elements[0].distance.text,c=a.rows[0].elements[0].duration.text),app.models.selectedPlace.setTransitInfo(b,c),app.views.placeModal.populate(app.models.selectedPlace),app.views.placeModal.show()})["catch"](app.controllers.stopExecution)},app.controllers.switchToGeolocation=function(){app.models.searchLoc.isGeoSearch=!0,app.modules.getCurrentLocation().then(function(a){app.models.searchLoc.lat=a.coords.latitude,app.models.searchLoc.lng=a.coords.longitude;var b={lat:app.models.searchLoc.lat,lng:app.models.searchLoc.lng},c={lat:app.models.selectedPlace.lat,lng:app.models.selectedPlace.lng};return app.modules.reqDrivingDistance(b,c)}).then(function(a){var b,c;a.rows[0].elements[0].distance&&a.rows[0].elements[0].duration&&(b=a.rows[0].elements[0].distance.text,c=a.rows[0].elements[0].duration.text),app.models.selectedPlace.setDrivingInfo(b,c);var d={lat:app.models.searchLoc.lat,lng:app.models.searchLoc.lng},e={lat:app.models.selectedPlace.lat,lng:app.models.selectedPlace.lng};return app.modules.reqTransitDistance(d,e)}).then(function(a){var b,c;a.rows[0].elements[0].distance&&a.rows[0].elements[0].duration&&(b=a.rows[0].elements[0].distance.text,c=a.rows[0].elements[0].duration.text),app.models.selectedPlace.setTransitInfo(b,c),app.views.placeModal.populate(app.models.selectedPlace),app.views.placeModal.show();var d=app.models.places.get();(d.primary||d.secondary)&&(d=d.primary.concat(d.secondary));var e=[];return d.forEach(function(a){e.push({lat:a.geometry.location.lat,lng:a.geometry.location.lng})}),app.modules.reqMultiDistance(app.models.searchLoc.lat,app.models.searchLoc.lng,e)}).then(function(a){var b=app.models.places.get();(b.primary||b.secondary)&&(b=b.primary.concat(b.secondary)),a.rows[0].elements.forEach(function(a,c){a.distance&&(b[c].drivingInfo={value:a.distance.value,distance:a.distance.text,duration:a.duration.text})});var c=app.modules.sortPlaces(b);app.models.places.add(c),app.models.searchLoc.totalItems=c.primary.length+c.secondary.length,app.views.alerts.show("success",app.models.searchLoc.totalItems+" matches! Click on an item for more details."),app.views.results.render(c),app.views.placeModal.init()})["catch"](app.controllers.stopExecution)}}(),$(function(){app.config.init(),app.models.searchLoc.init(),app.models.places.init(),app.views.page.init(),app.views.map.init(),app.views.form.init(),app.views.locationBtn.init(),app.views.alerts.init(),app.views.results.init(),app.views.recentSearches.init(),app.views.recentSearches.render(app.models.recentSearches.get()),app.views.progressModal.init(),app.views.placeModal.init()}),function(){app.models=app.models||{},app.models.places={init:function(){sessionStorage.removeItem("places")},add:function(a){sessionStorage.setItem("places",JSON.stringify(a))},get:function(){return JSON.parse(sessionStorage.getItem("places"))},find:function(a){for(var b=this.get(),c=b.primary,d=b.secondary,e=0,f=c.length;e<f;e++)if(c[e].place_id===a.place_id)return c[e];for(var g=0,h=d.length;g<h;g++)if(d[g].place_id===a.place_id)return d[g]}}}(),function(){app.models=app.models||{},app.models.recentSearches={add:function(a){var b=this.get(),c={};b?b.length>=5&&b.pop():b=[],c.lat=a.lat,c.lng=a.lng,c.city=a.city,c.state=a.state,c.totalItems=a.totalItems,b.unshift(c),localStorage.setItem("recentSearches",JSON.stringify(b))},get:function(){return JSON.parse(localStorage.getItem("recentSearches"))}}}(),function(){app.models=app.models||{},app.models.searchLoc={init:function(){this.lat=null,this.lng=null,this.city=null,this.state=null,this.totalItems=null,this.isGeoSearch=null},setBasicDetails:function(a){this.lat=a.lat,this.lng=a.lng,this.city=a.city,this.state=a.state,this.totalItems=a.totalItems},cityState:function(){if(null!==this.city&&null!==this.state)return this.city+", "+this.state}}}(),function(){app.models=app.models||{},app.models.selectedPlace={init:function(){this.placeId=null,this.lat=null,this.lng=null,this.name=null,this.openNow=null,this.website=null,this.address=null,this.googleMapsUrl=null,this.phoneNum=null,this.drivingInfo={},this.transitInfo={},this.hoursOpen=null},setOpenNow:function(a){this.openNow=a?"Yes":"No"},setWebsite:function(a){this.website=a?a:""},setAddress:function(a){this.address=a.replace(/, United States/i,"")},setGoogleMapsUrl:function(a){this.googleMapsUrl=a?a:""},setPhoneNum:function(a){this.phoneNum=a?a:""},setDrivingInfo:function(a,b){this.drivingInfo.distance=a?a:"",this.drivingInfo.duration=b?b:""},setTransitInfo:function(a,b){this.transitInfo.distance=a?a:"",this.transitInfo.duration=b?b:""},setHoursOpen:function(a){this.hoursOpen=a?a:""},setBasicDetails:function(a){this.placeId=a.place_id,this.lat=a.geometry.location.lat,this.lng=a.geometry.location.lng,this.name=a.name},setSpecificDetails:function(a){this.setWebsite(a.website),this.setAddress(a.formatted_address),this.setGoogleMapsUrl(a.url),this.setPhoneNum(a.formatted_phone_number),a.opening_hours&&(this.setOpenNow(a.opening_hours.isOpen()),this.setHoursOpen(a.opening_hours.weekday_text))}}}(),function(){app.modules=app.modules||{},app.modules.reqMultiDistance=function(a,b,c){return new Promise(function(d,e){function f(c,d){var f=new google.maps.DistanceMatrixService,h={origins:[new google.maps.LatLng(a,b)],destinations:c,travelMode:google.maps.TravelMode.DRIVING,unitSystem:app.config.settings.search.unitSystem};f.getDistanceMatrix(h,function(a,b){return b!=google.maps.DistanceMatrixStatus.OK?void e({type:"error",text:"An error occurred. Please try again."}):(k[d]=a,void g(k))})}function g(a){var b={originAddresses:[],destinationAddresses:[],rows:[{elements:[]}]};if(Object.keys(a).length===j){for(b.originAddresses=a[1].originAddresses,i=1;i<=j;i++)b.destinationAddresses=b.destinationAddresses.concat(a[i].destinationAddresses),b.rows[0].elements=b.rows[0].elements.concat(a[i].rows[0].elements);d(b)}}var h=25,j=Math.ceil(c.length/h),k={};for(i=1;i<=j;i++){var l=[],m=[];l=c.splice(0,h),l.forEach(function(a){m.push(new google.maps.LatLng(a.lat,a.lng))}),f(m,i)}})},app.modules.reqDrivingDistance=function(a,b){return new Promise(function(c,d){function e(a,b){return b!=google.maps.DistanceMatrixStatus.OK?void d({type:"error",text:"An error occurred. Please try again."}):void c(a)}var f=new google.maps.DistanceMatrixService,g={origins:[new google.maps.LatLng(a.lat,a.lng)],destinations:[new google.maps.LatLng(b.lat,b.lng)],travelMode:google.maps.TravelMode.DRIVING,unitSystem:app.config.settings.search.unitSystem};f.getDistanceMatrix(g,e)})},app.modules.reqTransitDistance=function(a,b){return new Promise(function(c,d){function e(a,b){return b!=google.maps.DistanceMatrixStatus.OK?void d({type:"error",text:"An error occurred. Please try again."}):void c(a)}var f=new google.maps.DistanceMatrixService,g={origins:[new google.maps.LatLng(a.lat,a.lng)],destinations:[new google.maps.LatLng(b.lat,b.lng)],travelMode:google.maps.TravelMode.TRANSIT,transitOptions:{modes:[google.maps.TransitMode.SUBWAY]},unitSystem:app.config.settings.search.unitSystem};f.getDistanceMatrix(g,e)})}}(),function(){app.modules=app.modules||{},app.modules.getGeocode=function(a){return new Promise(function(b,c){var d=new XMLHttpRequest,e="key="+app.config.google.apiKey+"&address="+encodeURIComponent(a);d.open("GET",app.config.google.geocodingAPI.reqURL+e,!0),d.onload=function(){if(d.readyState===XMLHttpRequest.DONE){if(200!==d.status)return void c({type:"error",text:"An error occurred. Please try again."});var a=JSON.parse(d.responseText);if("ZERO_RESULTS"===a.status||void 0===a.results[0].geometry.bounds)return void c({type:"error",text:"Sorry, that location could not be found."});b(a)}},d.send()})},app.modules.reverseGeocode=function(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest,f="key="+app.config.google.apiKey+"&latlng="+a+","+b;e.open("GET",app.config.google.geocodingAPI.reqURL+f,!0),e.send(),e.onload=function(){if(e.readyState===XMLHttpRequest.DONE){if(200!==e.status)return void d({type:"error",text:"An error occurred. Please try again."});var a=JSON.parse(e.responseText);c(a)}}})}}(),function(){app.modules=app.modules||{},app.modules.getCurrentLocation=function(){return new Promise(function(a,b){if(!navigator.geolocation)return void b({type:"error",text:"Sorry, geolocation is not supported in your browser."});var c=function(b){a(b)},d=function(){b({type:"error",text:"An error occurred. Please try again."})},e={enableHighAccuracy:!0};navigator.geolocation.getCurrentPosition(c,d,e)})}}(),function(){app.modules=app.modules||{},app.modules.reqPlaces=function(a,b){return new Promise(function(c,d){function e(a,b,e){return b==google.maps.places.PlacesServiceStatus.ZERO_RESULTS?void d({type:"info",text:"Your request returned no results."}):b!=google.maps.places.PlacesServiceStatus.OK?void d({type:"error",text:"An error occurred. Please try again."}):(h=h.concat(a),void(e.hasNextPage?e.nextPage():c(h)))}var f=new google.maps.places.PlacesService(app.views.map),g={location:new google.maps.LatLng(a,b),rankBy:app.config.settings.search.rankBy,keyword:app.config.settings.search.itemType},h=[];g.rankBy===google.maps.places.RankBy.PROMINENCE&&(g.radius=app.config.settings.search.radius),f.nearbySearch(g,e)})},app.modules.reqPlaceDetails=function(a){return new Promise(function(b,c){function d(a,d){return d!=google.maps.places.PlacesServiceStatus.OK?void c({type:"error",text:"An error occurred. Please try again."}):void b(a)}var e=new google.maps.places.PlacesService(app.views.map),f={placeId:a};e.getDetails(f,d)})}}(),function(){app.modules=app.modules||{},app.modules.insertionSort=function(a){for(var b=a.length,c=0;c<b;c++){for(var d=a[c],e=c-1;e>=0&&parseFloat(a[e].drivingInfo.value)>parseFloat(d.drivingInfo.value);e--)a[e+1]=a[e];a[e+1]=d}},app.modules.sortPlaces=function(a){for(var b=app.config.settings.search.primaryTypes,c=app.config.settings.search.secondaryTypes,d=app.config.settings.search.excludedTypes,e=[],f=[],g={primary:null,secondary:null},h=0,i=a.length;h<i;h++){var j=!1,k=!1,l=!1;b.forEach(function(b){a[h].types.includes(b)&&(j=!0)}),j&&e.push(a[h]),e.includes(a[h])||(c.forEach(function(b){a[h].types.includes(b)&&(k=!0,d.forEach(function(b){a[h].types.includes(b)&&(l=!0)}))}),k&&!l&&f.push(a[h]))}return app.config.settings.search.orderByDistance&&(app.modules.insertionSort(e),app.modules.insertionSort(f)),0===e.length&&0===f.length?void reject({type:"info",text:"Your request returned no results."}):(g.primary=e,g.secondary=f,g)}}(),function(){app.views=app.views||{},app.views.alerts={init:function(){this.alert=document.getElementById("alert"),this.alert.classList.add("hidden")},clear:function(){this.alert=document.getElementById("alert"),this.alert.classList.add("hidden");for(var a=["alert-danger","alert-info","alert-success"],b=0,c=a.length;b<c;b++)this.alert.classList.remove(a[b]);this.alert.textContent=null},show:function(a,b){var c;"error"===a?c="alert-danger":"info"===a?c="alert-info":"success"===a&&(c="alert-success"),this.alert.textContent=b,this.alert.classList.add(c),this.alert.classList.remove("hidden")}}}(),function(){app.views=app.views||{},app.views.form={init:function(){this.cityStateTbox=document.getElementById("cityStateTbox"),this.searchBtn=document.getElementById("searchBtn"),this.cityStateTbox.setAttribute("autofocus",!0),this.cityStateTbox.setAttribute("placeholder","New York, NY"),this.cityStateTbox.addEventListener("click",function(){this.value=null}),this.cityStateTbox.addEventListener("keyup",function(a){13===a.keyCode&&(app.views.page.disableButtons(),app.views.page.clear(),$("#resultsTab").tab("show"),app.controllers.formSearch())}),this.searchBtn.addEventListener("click",function(){app.views.page.disableButtons(),app.views.page.clear(),$("#resultsTab").tab("show"),app.controllers.formSearch()})},setTboxPlaceholder:function(a){this.cityStateTbox.value=null,this.cityStateTbox.setAttribute("placeholder",a)},disableSearchBtn:function(){this.searchBtn.setAttribute("disabled",!0)},enableSearchBtn:function(){this.searchBtn.removeAttribute("disabled")}},app.views.locationBtn={init:function(){this.locationBtn=document.getElementById("locationBtn"),this.locationBtn.addEventListener("click",function(){app.views.page.disableButtons(),app.views.page.clear(),$("#resultsTab").tab("show"),app.controllers.geolocationSearch()})},disable:function(){this.locationBtn.setAttribute("disabled",!0)},enable:function(){this.locationBtn.removeAttribute("disabled")}}}(),function(){app.views=app.views||{},app.views.map={init:function(){app.views.map=document.getElementById("map")}},app.views.page={init:function(){var a="",b=app.config.settings.search.itemType.split(/\s+/);b.forEach(function(b,c){a+=" "+b.charAt(0).toUpperCase()+b.slice(1)});var c=a+" Locator";document.title=c,document.getElementById("heading").textContent=c},clear:function(){app.views.alerts.clear(),app.views.results.clear()},disableButtons:function(){app.views.form.disableSearchBtn(),app.views.locationBtn.disable()},enableButtons:function(){app.views.form.enableSearchBtn(),app.views.locationBtn.enable()}}}(),function(){app.views=app.views||{},app.views.placeModal={init:function(){this.placeModal=document.getElementById("placeModal"),this.placeModalTitle=document.getElementById("placeModalTitle"),this.placeModalOpenNow=document.getElementById("placeModalOpenNow"),this.placeModalWebsite=document.getElementById("placeModalWebsite"),this.placeModalAddress=document.getElementById("placeModalAddress"),this.placeModalPhoneNum=document.getElementById("placeModalPhoneNum"),this.placeModalDrivingInfo=document.getElementById("placeModalDrivingInfo"),this.placeModalDistanceWarning=document.getElementById("placeModalDistanceWarning"),this.placeModalTransitInfo=document.getElementById("placeModalTransitInfo"),this.placeModalHoursOpen=document.getElementById("placeModalHoursOpen"),this.placeModalDistanceWarning.classList.add("hidden"),this.placeModalDistanceWarning.innerHTML="These transit times reflect the distance from the city in your search.<br>Click this message to update the search results to show transit times from your current location."},populate:function(a){for(var b=document.getElementById("placeModalBody").children,c=0,d=b.length;c<d;c++)b[c].classList.remove("hidden");var e=(new Date).getDay();e-=1,e=e===-1?6:e,this.placeModalTitle.textContent=a.name,a.openNow?this.placeModalOpenNow.textContent=a.openNow:this.placeModalOpenNow.parentElement.classList.add("hidden"),a.website?(this.placeModalWebsite.setAttribute("href",a.website),this.placeModalWebsite.textContent=a.website):this.placeModalWebsite.parentElement.classList.add("hidden"),a.address?(this.placeModalAddress.setAttribute("href",a.googleMapsUrl),this.placeModalAddress.textContent=a.address):this.placeModalAddress.parentElement.classList.add("hidden"),a.phoneNum?(this.placeModalPhoneNum.setAttribute("href","tel:"+a.phoneNum),this.placeModalPhoneNum.textContent=a.phoneNum):this.placeModalPhoneNum.parentElement.classList.add("hidden"),app.models.searchLoc.isGeoSearch&&this.placeModalDistanceWarning.classList.add("hidden"),this.placeModalDistanceWarning.addEventListener("mouseover",function(){this.classList.add("hovered")}),this.placeModalDistanceWarning.addEventListener("mouseout",function(){this.classList.remove("hovered"),this.classList.remove("clicked")}),this.placeModalDistanceWarning.addEventListener("click",function(){this.classList.add("clicked"),this.textContent="Updating...",app.controllers.switchToGeolocation()}),a.drivingInfo.duration||a.drivingInfo.distance?this.placeModalDrivingInfo.textContent=a.drivingInfo.duration+" ("+a.drivingInfo.distance+")":this.placeModalDrivingInfo.textContent="No driving options",a.transitInfo.duration||a.transitInfo.distance?this.placeModalTransitInfo.textContent=a.transitInfo.duration+" ("+a.transitInfo.distance+")":this.placeModalTransitInfo.textContent="No transit options",this.placeModalHoursOpen.textContent=null;var f=document.createDocumentFragment();if(a.hoursOpen){for(var g=0,h=a.hoursOpen.length;g<h;g++){var i=document.createElement("li"),j=a.hoursOpen[g].split(/:\s/);i.innerHTML="<span><strong>"+j[0]+":</strong>"+j[1]+"</span>",g===e&&i.classList.add("current-day"),f.appendChild(i)}this.placeModalHoursOpen.appendChild(f)}else this.placeModalHoursOpen.parentElement.classList.add("hidden")},show:function(){$("#placeModal").modal("show")},hide:function(){$("#placeModal").modal("hide")}}}(),function(){app.views=app.views||{},app.views.progressModal={init:function(){this.progressStatus=document.getElementById("progressStatus"),this.progressBar=document.getElementById("progressBar"),this.progressValue=0,this.message="",this.progressBar.children[0].textContent="0%",this.progressBar.setAttribute("aria-valuenow","0"),this.progressBar.setAttribute("aria-valuemin","0"),this.progressBar.setAttribute("aria-valuemax","100"),this.progressBar.setAttribute("style","min-width: 2em; width: 0")},start:function(a){$("#progressModal").modal("show"),this.progressValue=1,this.message=a,this.progressStatus.textContent=app.views.progressModal.message;var b=window.setInterval(function(){(app.views.progressModal.progressValue>=100||0===app.views.progressModal.progressValue)&&($("#progressModal").modal("hide"),$("#progressModal").on("hidden.bs.modal",function(){app.views.progressModal.init()}),window.clearInterval(b)),this.progressStatus.textContent=app.views.progressModal.message,this.progressBar.setAttribute("aria-valuenow",app.views.progressModal.progressValue),this.progressBar.setAttribute("style","min-width: 2em; width: "+app.views.progressModal.progressValue+"%"),this.progressBar.children[0].textContent=app.views.progressModal.progressValue+"%",app.views.progressModal.progressValue+=1},333)},update:function(a,b){this.message=b,this.progressValue>a||(this.progressValue=a)}}}(),function(){app.views=app.views||{},app.views.recentSearches={init:function(){this.recentSearchesList=document.getElementById("recentSearchesList")},render:function(a){if(this.recentSearchesList.textContent=null,!a){var b=document.createElement("li");return b.classList.add("list-group-item"),b.classList.add("text-center"),b.textContent="You have no recent searches.",void this.recentSearchesList.appendChild(b)}for(var c=document.createDocumentFragment(),d=0,e=a.length;d<e;d++){var b=document.createElement("li"),f=document.createElement("span");b.classList.add("list-group-item"),b.textContent=a[d].city+", "+a[d].state,f.classList.add("badge"),f.textContent=a[d].totalItems,b.appendChild(f),b.addEventListener("click",function(a){return function(){app.views.page.disableButtons(),app.views.page.clear(),$("#resultsTab").tab("show"),app.controllers.recentSearch(a)}}(a[d])),function(a){a.addEventListener("click",function(){a.classList.add("clicked")})}(b),function(a){a.addEventListener("mouseover",function(){a.classList.add("hovered")})}(b),function(a){a.addEventListener("mouseout",function(){a.classList.remove("hovered"),a.classList.remove("clicked")})}(b),c.appendChild(b)}this.recentSearchesList.appendChild(c)}}}(),function(){app.views=app.views||{},app.views.results={init:function(){this.primaryResults=document.getElementById("primaryResults"),this.primaryResultsList=document.getElementById("primaryResultsList"),this.secondaryResults=document.getElementById("secondaryResults"),this.secondaryResultsList=document.getElementById("secondaryResultsList"),this.primaryResults.classList.add("hidden"),this.secondaryResults.classList.add("hidden")},clear:function(){this.secondaryResults.classList.add("hidden"),this.secondaryResults.classList.add("hidden"),this.primaryResultsList.textContent=null,this.secondaryResultsList.textContent=null},render:function(a){if(this.primaryResults.classList.add("hidden"),this.secondaryResults.classList.add("hidden"),this.primaryResultsList.textContent=null,this.secondaryResultsList.textContent=null,!a)return void app.views.alerts.show("info","Your request returned no results.");for(var b=document.createDocumentFragment(),c=a.primary,d=0,e=c.length;d<e;d++){var f=document.createElement("li"),g=document.createElement("span");f.classList.add("list-group-item"),f.textContent=c[d].name,g.classList.add("badge"),g.textContent=c[d].drivingInfo.distance,f.appendChild(g),f.addEventListener("click",function(a){return function(){app.controllers.getDetails(a)}}(c[d])),function(a){a.addEventListener("click",function(){a.classList.add("clicked")})}(f),function(a){a.addEventListener("mouseover",function(){a.classList.add("hovered")})}(f),function(a){a.addEventListener("mouseout",function(){a.classList.remove("hovered"),a.classList.remove("clicked")})}(f),b.appendChild(f)}for(var h=document.createDocumentFragment(),i=a.secondary,j=0,k=i.length;j<k;j++){var f=document.createElement("li"),g=document.createElement("span");f.classList.add("list-group-item"),f.textContent=i[j].name,g.classList.add("badge"),g.textContent=i[j].drivingInfo.distance,f.appendChild(g),f.addEventListener("click",function(a){return function(){app.controllers.getDetails(a)}}(i[j])),function(a){a.addEventListener("click",function(){a.classList.add("clicked")})}(f),function(a){a.addEventListener("mouseover",function(){a.classList.add("hovered")})}(f),function(a){a.addEventListener("mouseout",function(){a.classList.remove("hovered"),a.classList.remove("clicked")})}(f),h.appendChild(f)}a.primary.length>0&&(this.primaryResults.classList.remove("hidden"),this.primaryResultsList.appendChild(b)),a.secondary.length>0&&(this.secondaryResults.classList.remove("hidden"),this.secondaryResultsList.appendChild(h)),$("#resultsTab").tab("show")}}}();